<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="https://kit.fontawesome.com/1d874cc34d.js" crossorigin="anonymous"></script>
    <title>Emba Web</title>
    <style>
      html,body {
        height: 100vh;
      }

      .h-33 {
        height: 33%!important;
      }

      .cartTitle {
        font-size: 1.8em;
        font-weight: bold;
      }
      .cardValueLegend {
        font-size: 1em;
        font-weight: bold;
      }
      .cardValue {
        font-size: 1em;
        font-weight: bold;
      }

      .cardValueLegendSmall {
        font-size: 0.9em;
        font-weight: lighter;
      }

    </style>
</head>
<body>
   
    <div class="container-fluid h-100">
 <!--MACCHINA START-->
 <div class="row p-3">
  <div class="col-12 d-flex ">
    <div class="justify-content-center align-self-center  mx-auto">
      <div class="row mt-2">
        <div class="col-12 cartTitle bg-light text-center" id="emba6Title"></div>
      </div>
      <div class="row mt-3 no-gutters">
        <div class="col-10 row no-gutters">
          <div class="col-12 row no-gutters "><div class="col-6 cardValueLegend text-secondary text-left">Mq Tot.</div><div class="col-6 cardValue text-center" id="emba6MqTot"></div></div>
          <div class="col-12 row no-gutters "><div class="col-6 cardValueLegend text-secondary text-left">Mq/h</div><div class="col-6 cardValue text-center text-success" id="emba6MqH"></div></div>
          <div class="col-12 row no-gutters "><div class="col-6 cardValueLegend text-secondary text-left">Fermo Tot.</div><div class="col-6 cardValue text-center text-danger" id="emba6FermoTot"></div></div>
          <div class="col-12 row no-gutters "><div class="col-6 cardValueLegend text-secondary text-left">Fermo Comm.</div><div class="col-6 cardValue text-center text-danger" id="emba6FermoCom"></div></div>
          <div class="col-12 row no-gutters  mt-3"><div class="col-6 cardValueLegendSmall text-left">Ultimo Agg.</div><div class="col-6 cardValueLegendSmall text-center" id="emba6UltimoUp"></div></div>
        </div>
        <div class="col-2 d-flex text-center">
          <div class="row justify-content-center align-self-center">
            <!-- <i class="col-12 fas fa-cog fa-spin  fa-3x text-warning"></i> -->
            <!-- <i class="fas fa-exclamation-triangle fa-3x text-danger"></i> -->
            </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!--MACCHINA END-->
     
      <!--MACCHINA START-->
      <div class="row p-3">
        <div class="col-12 d-flex ">
          <div class="justify-content-center align-self-center  mx-auto">
            <div class="row mt-2">
              <div class="col-12 cartTitle bg-light text-center" id="emba5Title"></div>
            </div>
            <div class="row mt-3 no-gutters">
              <div class="col-10 row no-gutters">
                <div class="col-12 row no-gutters "><div class="col-6 cardValueLegend text-secondary text-left">Mq Tot.</div><div class="col-6 cardValue text-center" id="emba5MqTot"></div></div>
                <div class="col-12 row no-gutters "><div class="col-6 cardValueLegend text-secondary text-left">Mq/h</div><div class="col-6 cardValue text-center text-success" id="emba5MqH"></div></div>
                <div class="col-12 row no-gutters "><div class="col-6 cardValueLegend text-secondary text-left">Fermo Tot.</div><div class="col-6 cardValue text-center text-danger" id="emba5FermoTot"></div></div>
                <div class="col-12 row no-gutters "><div class="col-6 cardValueLegend text-secondary text-left">Fermo Comm.</div><div class="col-6 cardValue text-center text-danger" id="emba5FermoCom"></div></div>
                <div class="col-12 row no-gutters  mt-3"><div class="col-6 cardValueLegendSmall text-left">Ultimo Agg.</div><div class="col-6 cardValueLegendSmall text-center" id="emba5UltimoUp"></div></div>
              </div>
              <div class="col-2 d-flex text-center">
                <div class="row justify-content-center align-self-center">
                  <!-- <i class="col-12 fas fa-cog fa-spin  fa-3x text-warning"></i> -->
                  <!-- <i class="fas fa-exclamation-triangle fa-3x text-danger"></i> -->
                  </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!--MACCHINA END-->
     

     <!--MACCHINA START-->
     <div class="row p-3">
      <div class="col-12 d-flex ">
        <div class="justify-content-center align-self-center  mx-auto">
          <div class="row mt-2">
            <div class="col-12 cartTitle bg-light text-center" id="emba4Title"></div>
          </div>
          <div class="row mt-3 no-gutters">
            <div class="col-10 row no-gutters">
              <div class="col-12 row no-gutters "><div class="col-6 cardValueLegend text-secondary text-left">Mq Tot.</div><div class="col-6 cardValue text-center" id="emba4MqTot"></div></div>
              <div class="col-12 row no-gutters "><div class="col-6 cardValueLegend text-secondary text-left">Mq/h</div><div class="col-6 cardValue text-center text-success" id="emba4MqH"></div></div>
              <div class="col-12 row no-gutters "><div class="col-6 cardValueLegend text-secondary text-left">Fermo Tot.</div><div class="col-6 cardValue text-center text-danger" id="emba4FermoTot"></div></div>
              <div class="col-12 row no-gutters "><div class="col-6 cardValueLegend text-secondary text-left">Fermo Comm.</div><div class="col-6 cardValue text-center text-danger" id="emba4FermoCom"></div></div>
              <div class="col-12 row no-gutters  mt-3"><div class="col-6 cardValueLegendSmall text-left">Ultimo Agg.</div><div class="col-6 cardValueLegendSmall text-center" id="emba4UltimoUp"></div></div>
            </div>
            <div class="col-2 d-flex text-center">
              <div class="row justify-content-center align-self-center">
                <!-- <i class="col-12 fas fa-cog fa-spin  fa-3x text-warning"></i> -->
                <!-- <i class="fas fa-exclamation-triangle fa-3x text-danger"></i> -->
                </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!--MACCHINA END-->

    </div>
   
<script src="https://www.gstatic.com/firebasejs/7.8.2/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.8.2/firebase-database.js"></script>
<script>
    var firebaseConfig = {
    apiKey: "AIzaSyCZky8lzCTdXM6qBauiRfQ41zrZ3EPNiaQ",
    authDomain: "embaweb-c4ec8.firebaseapp.com",
    databaseURL: "https://embaweb-c4ec8.firebaseio.com",
    projectId: "embaweb-c4ec8",
    storageBucket: "embaweb-c4ec8.appspot.com",
    messagingSenderId: "342536773221",
    appId: "1:342536773221:web:eb12ff5ec0b664d425308c"
    };
    firebase.initializeApp(firebaseConfig);
    // Get a reference to the database service
    var database = firebase.database();
    var embas = ['4', '5', '6']
    embas.forEach(e => {
      var emba = firebase.database().ref('Emba/Emba' + e);
      emba.on('value', function(snapshot) {
          var data = snapshot.val();
          handleEmba(e, data);
      });
    });

    function handleEmba(embaId, embaData) {
      document.getElementById(`emba${embaId}Title`).innerHTML = embaData.risorsa;
      document.getElementById(`emba${embaId}MqTot`).innerHTML = embaData.mqProdottiDaInizioTurno;
      document.getElementById(`emba${embaId}MqH`).innerHTML = embaData.mqOraDaInizioTurno;
      document.getElementById(`emba${embaId}FermoTot`).innerHTML = embaData.minutiFermoDaInizioTurno;
      document.getElementById(`emba${embaId}FermoCom`).innerHTML = embaData.minutiFermoCommessaAttuale;
      document.getElementById(`emba${embaId}UltimoUp`).innerHTML = (new Date(embaData.instant)).toLocaleTimeString();
    }
    
</script>
</body>
</html>